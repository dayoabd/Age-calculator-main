<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Age Calculator</title>
    <link href="./src/output.css" rel="stylesheet" />
  </head>

  <body
    class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen flex items-center justify-center font-sans"
  >
    <main
      class="bg-white shadow-xl rounded-br-[1rem] p-6 sm:p-10 w-[90%] sm:w-[500px] max-w-md"
    >
      <h1
        class="text-2xl sm:text-3xl font-bold text-gray-800 mb-6 text-left"
      >
        Age Calculator
      </h1>

      <!-- Input Section -->
      <div
        id="inputs"
        class="flex flex-wrap sm:flex-nowrap justify-start gap-4 mb-8"
      >
        <div class="flex flex-col w-[30%] min-w-[90px] sm:w-[100px]">
          <label
            for="date"
            class="text-xs tracking-widest text-gray-500 font-semibold mb-1"
            >DAY</label
          >
          <input
            id="date"
            type="text"
            placeholder="DD"
            class="p-2 sm:p-3 text-lg sm:text-xl border border-gray-300 rounded-lg text-gray-800 font-semibold text-center outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-400 transition"
          />
          <p id="dayError" class="text-xs text-red-500 mt-1 hidden">
            Invalid day
          </p>
        </div>

        <div class="flex flex-col w-[30%] min-w-[90px] sm:w-[100px]">
          <label
            for="month"
            class="text-xs tracking-widest text-gray-500 font-semibold mb-1"
            >MONTH</label
          >
          <input
            id="month"
            type="text"
            placeholder="MM"
            class="p-2 sm:p-3 text-lg sm:text-xl border border-gray-300 rounded-lg text-gray-800 font-semibold text-center outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-400 transition"
          />
          <p id="monthError" class="text-xs text-red-500 mt-1 hidden">
            Invalid month
          </p>
        </div>

        <div class="flex flex-col w-[35%] min-w-[110px] sm:w-[120px]">
          <label
            for="year"
            class="text-xs tracking-widest text-gray-500 font-semibold mb-1"
            >YEAR</label
          >
          <input
            id="year"
            type="text"
            placeholder="YYYY"
            class="p-2 sm:p-3 text-lg sm:text-xl border border-gray-300 rounded-lg text-gray-800 font-semibold text-center outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-400 transition"
          />
          <p id="yearError" class="text-xs text-red-500 mt-1 hidden">
            Invalid year
          </p>
        </div>
      </div>

      <!-- Divider and Button -->
      <div class="relative flex items-center justify-start mb-10">
        <hr class="w-full border-gray-300" />
        <button
          id="calcBtn"
          class="absolute bg-blue-600 hover:bg-blue-700 right-[-25px] sm:right-[-35px] active:scale-95 text-white rounded-full p-3 sm:p-5 shadow-lg transition-all duration-300"
        >
          <img
            src="../assets/images/icon-arrow.svg"
            alt="calculate"
            class="h-5 w-5 sm:h-6 sm:w-6"
          />
        </button>
      </div>

      <!-- Result Section -->
      <div
        id="result"
        class="space-y-2 text-gray-900 font-extrabold text-3xl sm:text-5xl leading-snug text-left"
      >
        <p><span id="years" class="text-blue-600">--</span> years</p>
        <p><span id="months" class="text-blue-600">--</span> months</p>
        <p><span id="days" class="text-blue-600">--</span> days</p>
      </div>
    </main>

    <script>
      const calcBtn = document.getElementById("calcBtn");
      const inputs = ["date", "month", "year"];

      // Clear error on typing
      inputs.forEach((id) => {
        const input = document.getElementById(id);
        const error = document.getElementById(id + "Error");
        input.addEventListener("input", () => {
          error.classList.add("hidden");
          input.classList.remove("border-red-500");
        });
      });

      calcBtn.addEventListener("click", function () {
        const dayInput = document.getElementById("date");
        const monthInput = document.getElementById("month");
        const yearInput = document.getElementById("year");

        const day = parseInt(dayInput.value);
        const month = parseInt(monthInput.value);
        const year = parseInt(yearInput.value);
        const today = new Date();

        // Reset result
        document.getElementById("years").textContent = "--";
        document.getElementById("months").textContent = "--";
        document.getElementById("days").textContent = "--";

        // Reset errors
        document
          .querySelectorAll("p[id$='Error']")
          .forEach((p) => p.classList.add("hidden"));
        document
          .querySelectorAll("input")
          .forEach((i) => i.classList.remove("border-red-500"));

        let hasError = false;

        // Validation
        if (isNaN(day) || day < 1 || day > 31) {
          document.getElementById("dayError").classList.remove("hidden");
          dayInput.classList.add("border-red-500");
          hasError = true;
        }
        if (isNaN(month) || month < 1 || month > 12) {
          document.getElementById("monthError").classList.remove("hidden");
          monthInput.classList.add("border-red-500");
          hasError = true;
        }
        if (isNaN(year) || year < 1900 || year > today.getFullYear()) {
          document.getElementById("yearError").classList.remove("hidden");
          yearInput.classList.add("border-red-500");
          hasError = true;
        }

        if (hasError) return;

        const birthDate = new Date(year, month - 1, day);

        if (
          birthDate.getDate() !== day ||
          birthDate.getMonth() !== month - 1 ||
          birthDate.getFullYear() !== year ||
          birthDate > today
        ) {
          document.getElementById("dayError").textContent =
            "Invalid or future date";
          document.getElementById("dayError").classList.remove("hidden");
          dayInput.classList.add("border-red-500");
          return;
        }

        // Calculate age
        let years = today.getFullYear() - birthDate.getFullYear();
        let months = today.getMonth() - birthDate.getMonth();
        let days = today.getDate() - birthDate.getDate();

        if (days < 0) {
          months--;
          const prevMonth = new Date(today.getFullYear(), today.getMonth(), 0);
          days += prevMonth.getDate();
        }
        if (months < 0) {
          years--;
          months += 12;
        }

        // Display result
        document.getElementById("years").textContent = years;
        document.getElementById("months").textContent = months;
        document.getElementById("days").textContent = days;
      });
    </script>
  </body>
</html>
